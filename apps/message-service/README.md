# K-Message Service Example

μ‹¤μ  μ‘λ™ κ°€λ¥ν• K-Message ν¨ν‚¤μ§€ ν™μ© μμ‹μ…λ‹λ‹¤.

## π― λ©μ 

- K-Messageμ λ¨λ“  ν¨ν‚¤μ§€λ“¤μ΄ μ κΈ°μ μΌλ΅ μ—°λ™λλ”μ§€ ν™•μΈ
- μ‹¤μ  μ‚¬μ© κ°€λ¥ν• λ©”μ‹μ§• μ„λΉ„μ¤ κµ¬ν„
- κ°λ°μλ“¤μ΄ μ°Έκ³ ν•  μ μλ” μ‹¤μ©μ μΈ μμ‹ μ κ³µ

## π“¦ μ‚¬μ©λ K-Message ν¨ν‚¤μ§€λ“¤

- `@k-msg/core` - ν•µμ‹¬ νƒ€μ…κ³Ό μΈν„°νμ΄μ¤
- `@k-msg/provider` - IWINV ν”„λ΅λ°”μ΄λ”
- `@k-msg/template` - ν…ν”λ¦Ώ κ΄€λ¦¬ μ„λΉ„μ¤
- `@k-msg/messaging` - λ©”μ‹μ§€ μ „μ†΅ λ° μ¶”μ 
- `@k-msg/analytics` - λ¶„μ„ λ° μΈμ‚¬μ΄νΈ

## π€ μ‹¤ν–‰ λ°©λ²•

```bash
# 1. κ°λ° μ„λ²„ μ‹μ‘
bun run dev

# 2. λ³„λ„ ν„°λ―Έλ„μ—μ„ ν…μ¤νΈ μ‹¤ν–‰
bun src/test-client.ts
```

## π”§ ν™κ²½ λ³€μ

```bash
# .env νμΌ μƒμ„±
IWINV_API_KEY=your_api_key_here
PORT=3002
```

## π“΅ API μ—”λ“ν¬μΈνΈ

### ν—¬μ¤ μ²΄ν¬
```bash
GET /health
```

### ν…ν”λ¦Ώ κ΄€λ¦¬
```bash
# ν…ν”λ¦Ώ μƒμ„±
POST /templates
{
  "name": "welcome_template",
  "content": "Welcome #{customerName}! Code: #{code}",
  "category": "AUTHENTICATION"
}

# ν…ν”λ¦Ώ λ©λ΅
GET /templates
```

### λ©”μ‹μ§€ λ°μ†΅
```bash
POST /messages/send
{
  "phoneNumber": "01012345678",
  "templateName": "welcome_template", 
  "variables": {
    "customerName": "ν™κΈΈλ™",
    "code": "123456"
  }
}
```

### λ¶„μ„ λ°μ΄ν„°
```bash
GET /analytics
```

## π§ ν…μ¤νΈ μ‹λ‚λ¦¬μ¤

ν…μ¤νΈ ν΄λΌμ΄μ–ΈνΈ(`src/test-client.ts`)λ” λ‹¤μ μ‹λ‚λ¦¬μ¤λ¥Ό μ‹¤ν–‰ν•©λ‹λ‹¤:

1. **ν—¬μ¤ μ²΄ν¬** - λ¨λ“  μ„λΉ„μ¤κ°€ μ •μƒ μ‘λ™ν•λ”μ§€ ν™•μΈ
2. **ν…ν”λ¦Ώ μƒμ„±** - μλ™ λ³€μ νμ‹± ν¬ν•¨
3. **ν…ν”λ¦Ώ λ©λ΅ μ΅°ν** - TemplateService μ—°λ™ ν™•μΈ
4. **λ©”μ‹μ§€ λ°μ†΅** - Provider + DeliveryTracker μ—°λ™ ν™•μΈ
5. **Analytics μ΅°ν** - InsightEngine μ—°λ™ ν™•μΈ
6. **λ€λ‰ λ°μ†΅** - μ—¬λ¬ λ©”μ‹μ§€ λ°μ†΅μΌλ΅ ν†µκ³„ λ°μ΄ν„° μƒμ„±
7. **μµμΆ… ν†µκ³„ ν™•μΈ** - λ„μ λ λ¶„μ„ λ°μ΄ν„° ν™•μΈ

## π—οΈ μ•„ν‚¤ν…μ²

```
KMessageService
β”β”€β”€ IWINVProvider      (λ©”μ‹μ§€ μ‹¤μ  λ°μ†΅)
β”β”€β”€ TemplateService    (ν…ν”λ¦Ώ κ΄€λ¦¬)  
β”β”€β”€ DeliveryTracker    (λ°μ†΅ μ¶”μ )
β””β”€β”€ InsightEngine      (λ¶„μ„ λ° μΈμ‚¬μ΄νΈ)
```

## π’΅ μ£Όμ” νΉμ§•

- **ν†µν•© μ„λΉ„μ¤**: λ¨λ“  K-Message ν¨ν‚¤μ§€λ¥Ό ν•λ‚μ μ„λΉ„μ¤μ—μ„ ν™μ©
- **μλ™ λ³€μ νμ‹±**: ν…ν”λ¦Ώ λ‚΄μ©μ—μ„ `#{λ³€μλ…}` μλ™ μ¶”μ¶
- **μ‹¤μ‹κ°„ μ¶”μ **: λ©”μ‹μ§€ λ°μ†΅κ³Ό λ™μ‹μ— λ°°μ†΅ μ¶”μ  μ‹μ‘
- **μλ™ λ¶„μ„**: λ°μ†΅ μ΄λ²¤νΈλ¥Ό μλ™μΌλ΅ Analyticsμ— κΈ°λ΅
- **μ¤λ¥ μ²λ¦¬**: κ° ν¨ν‚¤μ§€λ³„ μ¤λ¥ μƒν™© μ²λ¦¬

## π” ν¨ν‚¤μ§€ μ—°λ™ ν™•μΈμ 

1. **Provider β†” Template**: ν…ν”λ¦Ώ μƒμ„± μ‹ μ–‘μ½ λ¨λ‘ λ“±λ΅
2. **Messaging β†” Analytics**: λ°μ†΅ μ΄λ²¤νΈ μλ™ κΈ°λ΅
3. **Provider β†” DeliveryTracker**: λ°μ†΅ μ„±κ³µ μ‹ μ¶”μ  μ‹μ‘
4. **λ¨λ“  ν¨ν‚¤μ§€**: ν†µν•© ν—¬μ¤ μ²΄ν¬λ΅ μƒνƒ ν™•μΈ

μ΄ μμ‹λ¥Ό ν†µν•΄ K-Message ν¨ν‚¤μ§€λ“¤μ΄ μ‹¤μ λ΅ μ–΄λ–»κ² ν•¨κ» μ‘λ™ν•λ”μ§€ ν™•μΈν•  μ μμµλ‹λ‹¤.
